<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8" />
    <title th:text="${product.id} ? 'Edit Product' : 'Create Product'">Product</title>
    <link href="/css/tailwind.css" rel="stylesheet" />
</head>

<body class="bg-gray-100 p-6">
    <div class="max-w-3xl mx-auto">
        <header class="mb-4 flex items-center justify-between">
            <h1 class="text-2xl font-bold" th:text="${product.id} ? 'Edit Product' : 'Create Product'">Product</h1>
            <a href="/admin/products" class="text-sm text-indigo-600">Back to products</a>
        </header>

        <div th:if="${#fields.hasErrors()}" class="mb-4 text-red-600">Please correct the highlighted fields.</div>

        <form th:action="${product.id} ? @{/admin/products/update} : @{/admin/products/save}" th:object="${product}"
            method="post" enctype="multipart/form-data" class="bg-white p-6 rounded shadow">
            <input type="hidden" th:if="${product.id}" th:field="*{id}" />
            <div class="mb-4">
                <label class="block text-sm font-medium">Name</label>
                <input th:field="*{name}" class="w-full border p-2 rounded" />
                <div th:if="${#fields.hasErrors('name')}" th:errors="*{name}" class="text-sm text-red-600"></div>
            </div>

            <div class="mb-4">
                <label class="block text-sm font-medium">Description</label>
                <textarea th:field="*{description}" class="w-full border p-2 rounded"></textarea>
            </div>

            <div class="grid grid-cols-2 gap-4">
                <div class="mb-4">
                    <label class="block text-sm font-medium">Price</label>
                    <input th:field="*{price}" type="number" step="0.01" class="w-full border p-2 rounded" />
                    <div th:if="${#fields.hasErrors('price')}" th:errors="*{price}" class="text-sm text-red-600"></div>
                </div>

                <div class="mb-4">
                    <label class="block text-sm font-medium">Quantity</label>
                    <input th:field="*{quantity}" type="number" class="w-full border p-2 rounded" />
                    <div th:if="${#fields.hasErrors('quantity')}" th:errors="*{quantity}" class="text-sm text-red-600">
                    </div>
                </div>
            </div>

            <div class="mb-4">
                <label class="block text-sm font-medium">Image (optional)</label>
                <input name="imageFile" type="file" class="w-full" />
                <div th:if="${product.imagePath}" class="mt-2">
                    <img th:src="${product.imagePath}" alt="current" class="w-32 h-32 object-cover rounded" />
                </div>
            </div>

            <div>
                <button type="submit" class="px-4 py-2 bg-indigo-600 text-white rounded">Save</button>
            </div>
        </form>
    </div>
</body>

</html>